import Uploader from './editorjs-uploader.js';

const LOADER_DELAY = 500;
export default class MoveDuration {
	// constructor({ data, config, api, block }) {
	constructor(params) {
		this.api = params.api;

		this.nodes = {
			wrapper: null,
			wrapper_check1: null,
			wrapper_check2: null,

			wrapper_input1: null,
			wrapper_input2: null,
			wrapper_input3: null,

			// params for response
			check_row1_title: null,
			check_row1_text: null,
			check_row1_className: null,
			check_row1_info: null,

			start_label: null,
			start_className: null,
			start_iconClass: null,
			start_labelClass: null,
			start_inputWrapperClass: null,
			start_inputClass: null,

			check_row2_title: null,
			check_row2_text: null,
			check_row2_className: null,
			check_row2_info: null,

			start2_label: null,
			start2_className: null,
			start2_iconClass: null,
			start2_labelClass: null,
			start2_inputWrapperClass: null,
			start2_inputClass: null,

			stop_label: null,
			stop_className: null,
			stop_iconClass: null,
			stop_labelClass: null,
			stop_inputWrapperClass: null,
			stop_inputClass: null,
		};

		this.config = {
			endpoint: params.config.endpoint || '',
			field: params.config.field || 'image',
			types: params.config.types || 'image/*',
			namePlaceholder: params.config.namePlaceholder || 'Name',
			descriptionPlaceholder: params.config.descriptionPlaceholder || 'Description',
			linkPlaceholder: params.config.linkPlaceholder || 'Link',
		};

		/**
		 * Set saved state
		 */
		this.data = params.data;

		this.config.uploader = params.config.uploader;
		this.uploader = new Uploader({
			config: this.config,
			getCurrentFile: () => this.data.secureIcon,
			onUpload: (response) => this.onUpload({ body: response }),
			onError: (error) => this.uploadingFailed(error),
		});

		this.onUpload = (response) => {
			const {
				body: { success, file },
			} = response;

			if (success && file && file.url) {
				this.data.secureIcon = file.url;

				this.showFullImage();
			}
			// super.onUpload(response);
			params.block.save().then((state) => {
				params.api.blocks.update(state.id, state.data);
			});
		};
	}

	onUpload(response) {
		const {
			body: { success, file },
		} = response;

		if (success && file && file.url) {
			this.data.secureIcon = file.url;

			this.showFullImage();
		}
	}

	static get toolbox() {
		return {
			title: 'Move Duration',
			icon: `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>`,
		};
	}

	render() {
		const CheckBoxIcon = `data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMiAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIyIiBoZWlnaHQ9IjIxIiByeD0iMTAuNSIgZmlsbD0id2hpdGUiLz4KPHJlY3QgeD0iMyIgeT0iMyIgd2lkdGg9IjE2LjAyMzMiIGhlaWdodD0iMTUuMjk1IiByeD0iNy42NDc0OCIgZmlsbD0iIzMzMzc1RCIvPgo8L3N2Zz4K`;
		const iconElement = this.make('img', 'checboxIcon', {
			src: CheckBoxIcon,
		});

		const settingsIcon = this.make('img', 'settingsIcon', {
			src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiByeD0iNSIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwIDYuMjVWNU0xMCA2LjI1QzkuNjY4NDggNi4yNSA5LjM1MDU0IDYuMzgxNyA5LjExNjEyIDYuNjE2MTJDOC44ODE3IDYuODUwNTQgOC43NSA3LjE2ODQ4IDguNzUgNy41QzguNzUgNy44MzE1MiA4Ljg4MTcgOC4xNDk0NiA5LjExNjEyIDguMzgzODhDOS4zNTA1NCA4LjYxODMgOS42Njg0OCA4Ljc1IDEwIDguNzVNMTAgNi4yNUMxMC4zMzE1IDYuMjUgMTAuNjQ5NSA2LjM4MTcgMTAuODgzOSA2LjYxNjEyQzExLjExODMgNi44NTA1NCAxMS4yNSA3LjE2ODQ4IDExLjI1IDcuNUMxMS4yNSA3LjgzMTUyIDExLjExODMgOC4xNDk0NiAxMC44ODM5IDguMzgzODhDMTAuNjQ5NSA4LjYxODMgMTAuMzMxNSA4Ljc1IDEwIDguNzVNNi4yNSAxMy43NUM2LjU4MTUyIDEzLjc1IDYuODk5NDYgMTMuNjE4MyA3LjEzMzg4IDEzLjM4MzlDNy4zNjgzIDEzLjE0OTUgNy41IDEyLjgzMTUgNy41IDEyLjVDNy41IDEyLjE2ODUgNy4zNjgzIDExLjg1MDUgNy4xMzM4OCAxMS42MTYxQzYuODk5NDYgMTEuMzgxNyA2LjU4MTUyIDExLjI1IDYuMjUgMTEuMjVNNi4yNSAxMy43NUM1LjkxODQ4IDEzLjc1IDUuNjAwNTQgMTMuNjE4MyA1LjM2NjEyIDEzLjM4MzlDNS4xMzE3IDEzLjE0OTUgNSAxMi44MzE1IDUgMTIuNUM1IDEyLjE2ODUgNS4xMzE3IDExLjg1MDUgNS4zNjYxMiAxMS42MTYxQzUuNjAwNTQgMTEuMzgxNyA1LjkxODQ4IDExLjI1IDYuMjUgMTEuMjVNNi4yNSAxMy43NVYxNU02LjI1IDExLjI1VjVNMTAgOC43NVYxNU0xMy43NSAxMy43NUMxNC4wODE1IDEzLjc1IDE0LjM5OTUgMTMuNjE4MyAxNC42MzM5IDEzLjM4MzlDMTQuODY4MyAxMy4xNDk1IDE1IDEyLjgzMTUgMTUgMTIuNUMxNSAxMi4xNjg1IDE0Ljg2ODMgMTEuODUwNSAxNC42MzM5IDExLjYxNjFDMTQuMzk5NSAxMS4zODE3IDE0LjA4MTUgMTEuMjUgMTMuNzUgMTEuMjVNMTMuNzUgMTMuNzVDMTMuNDE4NSAxMy43NSAxMy4xMDA1IDEzLjYxODMgMTIuODY2MSAxMy4zODM5QzEyLjYzMTcgMTMuMTQ5NSAxMi41IDEyLjgzMTUgMTIuNSAxMi41QzEyLjUgMTIuMTY4NSAxMi42MzE3IDExLjg1MDUgMTIuODY2MSAxMS42MTYxQzEzLjEwMDUgMTEuMzgxNyAxMy40MTg1IDExLjI1IDEzLjc1IDExLjI1TTEzLjc1IDEzLjc1VjE1TTEzLjc1IDExLjI1VjUiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K',
		});

		const settingWrapper = this.make('div', 'settingsWrapper');

		this.nodes.wrapper = this.make('div', this.CSS.wrapper);
		this.nodes.wrapper_check1 = this.make('div', this.CSS.wrapper_check1);
		this.nodes.wrapper_input1 = this.make('div', this.CSS.wrapper_input1);

		this.nodes.wrapper_check2 = this.make('div', this.CSS.wrapper_check2);
		this.nodes.wrapper_input2 = this.make('div', this.CSS.wrapper_input2);
		this.nodes.wrapper_input3 = this.make('div', this.CSS.wrapper_input3);

		this.nodes.check_row1_title = this.make(
			'div',
			this.CSS.check_row1_title,
			{
				contentEditable: true,
			},
			this.data && this.data.check_row1_title ? this.data.check_row1_title : 'Permanent'
		);

		this.nodes.check_row1_text = this.make(
			'div',
			this.CSS.check_row1_text,
			{
				contentEditable: true,
			},
			this.data && this.data.check_row1_text
				? this.data.check_row1_text
				: 'Select Permanent If You Have No Plans To Move Back To Your Old Address.'
		);

		this.nodes.check_row2_title = this.make(
			'div',
			this.CSS.check_row2_title,
			{
				contentEditable: true,
			},
			this.data && this.data.check_row2_title ? this.data.check_row2_title : 'Temporary'
		);

		this.nodes.check_row2_text = this.make(
			'div',
			this.CSS.check_row2_text,
			{
				contentEditable: true,
			},
			this.data && this.data.check_row2_text
				? this.data.check_row2_text
				: 'Select Temporary If You Plan To Move Back To Your Old Address Within 6 Months.'
		);

		this.nodes.start_label = this.make(
			'div',
			this.CSS.start_label,
			{
				contentEditable: true,
			},
			this.data && this.data.start_label ? this.data.start_label : 'Start forwarding on'
		);

		this.nodes.start2_label = this.make(
			'div',
			this.CSS.start_label2,
			{
				contentEditable: true,
			},
			this.data && this.data.start2_label ? this.data.start2_label : 'Start forwarding on'
		);

		this.nodes.start3_label = this.make(
			'div',
			this.CSS.start_label3,
			{
				contentEditable: true,
			},
			this.data && this.data.start3_label ? this.data.start3_label : 'Stop forwarding on'
		);

		const wrapC = this.make('div', '');
		var sI = settingsIcon.cloneNode(true);
		sI.addEventListener('click', () => {
			this._toggleTune('check1');
		});

		var settingW = settingWrapper.cloneNode(true);

		var settingWW = this.make('div', 'check1');
		var lbl = this.make(
			'label',
			'',
			{
				for: 'check_row1_className',
			},
			'Class'
		);
		var inpt = this.make('input', '', {
			type: 'text',
			name: 'check_row1_className',
			value: this.data && this.data.check_row1_className ? this.data.check_row1_className : 'mb-7 mt-1',
		});

		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'check1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row1_iconClass',
			},
			'Icon Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'check_row1_iconClass',
			value:
				this.data && this.data.check_row1_iconClass ? this.data.check_row1_iconClass : 'text-primary-77 rounded-3xl',
		});

		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'check1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row1_checkboxClass',
			},
			'Checkbox Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'check_row1_checkboxClass',
			value:
				this.data && this.data.check_row1_checkboxClass
					? this.data.check_row1_checkboxClass
					: 'w-5 h-5 text-primary-50 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2',
		});

		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'check1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row1_info',
			},
			'Show Info button'
		);
		inpt = this.make('input', '', {
			type: 'checkbox',
			name: 'check_row1_info',
			value: 'showInfo',
			checked: this.data && this.data.check_row1_info ? this.data.check_row1_info : true,
		});
		var btn = this.make('button', '', {}, 'Save');
		btn.addEventListener('click', () => {
			this._toggleTune('check1', 'save');
		});

		lbl.prepend(inpt);
		settingWW.appendChild(lbl);
		settingWW.appendChild(btn);
		settingW.appendChild(settingWW);

		this.nodes.wrapper_check1.appendChild(settingW);
		this.nodes.wrapper_check1.appendChild(sI);
		this.nodes.wrapper_check1.appendChild(iconElement);
		wrapC.appendChild(this.nodes.check_row1_title);
		wrapC.appendChild(this.nodes.check_row1_text);
		this.nodes.wrapper_check1.appendChild(wrapC);

		sI = settingsIcon.cloneNode(true);
		sI.addEventListener('click', () => {
			this._toggleTune('check2');
		});
		const wrapC2 = this.make('div', '');
		settingW = settingWrapper.cloneNode(true);
		settingWW = this.make('div', 'check2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row2_className',
			},
			'Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'check_row2_className',
			value: this.data && this.data.check_row2_className ? this.data.check_row2_className : 'mb-7',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'check1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row2_iconClass',
			},
			'Checkbox Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'check_row2_iconClass',
			value:
				this.data && this.data.check_row2_iconClass ? this.data.check_row2_iconClass : 'text-primary-77 rounded-3xl',
		});

		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'check1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row2_checkboxClass',
			},
			'Checkobx Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'check_row2_checkboxClass',
			value:
				this.data && this.data.check_row2_checkboxClass
					? this.data.check_row2_checkboxClass
					: 'w-5 h-5 text-primary-50 bg-gray-100 border-gray-300 focus:ring-blue-500 focus:ring-2',
		});

		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'check2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'check_row2_info',
			},
			'Show Info button'
		);
		inpt = this.make('input', '', {
			type: 'checkbox',
			name: 'check_row2_info',
			value: 'showInfo',
			checked: this.data && this.data.check_row2_info ? this.data.check_row2_info : true,
		});
		btn = this.make('button', '', {}, 'Save');
		btn.addEventListener('click', () => {
			this._toggleTune('check2', 'save');
		});
		lbl.prepend(inpt);
		settingWW.appendChild(lbl);
		settingWW.appendChild(btn);
		settingW.appendChild(settingWW);
		this.nodes.wrapper_check2.appendChild(settingW);

		this.nodes.wrapper_check2.appendChild(sI);
		this.nodes.wrapper_check2.appendChild(iconElement.cloneNode(true));
		wrapC2.appendChild(this.nodes.check_row2_title);
		wrapC2.appendChild(this.nodes.check_row2_text);
		this.nodes.wrapper_check2.appendChild(wrapC2);

		sI = settingsIcon.cloneNode(true);
		sI.addEventListener('click', () => {
			this._toggleTune('input1');
		});

		settingW = settingWrapper.cloneNode(true);
		settingWW = this.make('div', 'start1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start_className',
			},
			'Input Component Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start_className',
			value: this.data && this.data.start_className ? this.data.start_className : 'justify-end mb-7 pr-5',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start_inputClass',
			},
			'Input Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start_inputClass',
			value: this.data && this.data.start_inputClass ? this.data.start_inputClass : 'w-full',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start_labelClass',
			},
			'Label Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start_labelClass',
			value: this.data && this.data.start_labelClass ? this.data.start_labelClass : 'text-right pr-1 justify-end',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start_inputWrapperClass',
			},
			'Wrapper Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start_inputWrapperClass',
			value:
				this.data && this.data.start_inputWrapperClass
					? this.data.start_inputWrapperClass
					: 'justify-end xl:w-2/3 lg:w-2/4 w-2/4 relative',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start1');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start_iconClass',
			},
			'Icon Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start_iconClass',
			value: this.data && this.data.start_iconClass ? this.data.start_iconClass : 'absolute right-1',
		});
		btn = this.make('button', '', {}, 'Save');
		btn.addEventListener('click', () => {
			this._toggleTune('input1', 'save');
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingWW.appendChild(btn);
		settingW.appendChild(settingWW);

		this.nodes.wrapper_input1.appendChild(settingW);
		this.nodes.wrapper_input1.appendChild(sI);
		this.nodes.wrapper_input1.appendChild(this.nodes.start_label);

		sI = settingsIcon.cloneNode(true);
		sI.addEventListener('click', () => {
			this._toggleTune('input2');
		});
		settingW = settingWrapper.cloneNode(true);
		settingWW = this.make('div', 'start2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start2_className',
			},
			'Input Component Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start2_className',
			value: this.data && this.data.start2_className ? this.data.start2_className : 'justify-end pr-5',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start2_labelClass',
			},
			'Label Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start2_labelClass',
			value: this.data && this.data.start2_labelClass ? this.data.start2_labelClass : 'text-right pr-1 justify-end',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start2_inputClass',
			},
			'Input Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start2_inputClass',
			value: this.data && this.data.start2_inputClass ? this.data.start2_inputClass : 'w-full',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start2_inputWrapperClass',
			},
			'Wrapper Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start2_inputWrapperClass',
			value:
				this.data && this.data.start2_inputWrapperClass
					? this.data.start2_inputWrapperClass
					: 'justify-end xl:w-2/3 lg:w-2/4 w-2/4 relative',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'start2');
		lbl = this.make(
			'label',
			'',
			{
				for: 'start2_iconClass',
			},
			'Icon Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'start2_iconClass',
			value: this.data && this.data.start2_iconClass ? this.data.start2_iconClass : 'absolute right-1',
		});
		btn = this.make('button', '', {}, 'Save');
		btn.addEventListener('click', () => {
			this._toggleTune('input2', 'save');
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingWW.appendChild(btn);
		settingW.appendChild(settingWW);

		this.nodes.wrapper_input2.appendChild(settingW);
		this.nodes.wrapper_input2.appendChild(sI);
		this.nodes.wrapper_input2.appendChild(this.nodes.start2_label);

		sI = settingsIcon.cloneNode(true);
		sI.addEventListener('click', () => {
			this._toggleTune('input3');
		});
		settingW = settingWrapper.cloneNode(true);
		settingWW = this.make('div', 'stop');
		lbl = this.make(
			'label',
			'',
			{
				for: 'stop_className',
			},
			'Input Component Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'stop_className',
			value: this.data && this.data.stop_className ? this.data.stop_className : 'justify-end mb-7 pr-5',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'stop');
		lbl = this.make(
			'label',
			'',
			{
				for: 'stop_inputClass',
			},
			'Input Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'stop_inputClass',
			value: this.data && this.data.stop_inputClass ? this.data.stop_inputClass : 'w-full',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'stop');
		lbl = this.make(
			'label',
			'',
			{
				for: 'stop_labelClass',
			},
			'Label Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'stop_labelClass',
			value: this.data && this.data.stop_labelClass ? this.data.stop_labelClass : 'text-right pr-1 justify-end',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'stop');
		lbl = this.make(
			'label',
			'',
			{
				for: 'stop_inputWrapperClass',
			},
			'Wrapper Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'stop_inputWrapperClass',
			value:
				this.data && this.data.stop_inputWrapperClass
					? this.data.stop_inputWrapperClass
					: 'justify-end xl:w-2/3 lg:w-2/4 w-2/4 relative',
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingW.appendChild(settingWW);

		settingWW = this.make('div', 'stop');
		lbl = this.make(
			'label',
			'',
			{
				for: 'stop_iconClass',
			},
			'Icon Class'
		);
		inpt = this.make('input', '', {
			type: 'text',
			name: 'stop_iconClass',
			value: this.data && this.data.stop_iconClass ? this.data.stop_iconClass : 'absolute right-1',
		});
		btn = this.make('button', '', {}, 'Save');
		btn.addEventListener('click', () => {
			this._toggleTune('input3', 'save');
		});
		settingWW.appendChild(lbl);
		settingWW.appendChild(inpt);
		settingWW.appendChild(btn);
		settingW.appendChild(settingWW);

		this.nodes.wrapper_input3.appendChild(settingW);
		this.nodes.wrapper_input3.appendChild(sI);
		this.nodes.wrapper_input3.appendChild(this.nodes.start3_label);

		this.nodes.wrapper.appendChild(this.nodes.wrapper_check1);
		this.nodes.wrapper.appendChild(this.nodes.wrapper_input1);
		this.nodes.wrapper.appendChild(this.nodes.wrapper_check2);
		this.nodes.wrapper.appendChild(this.nodes.wrapper_input2);
		this.nodes.wrapper.appendChild(this.nodes.wrapper_input3);

		return this.nodes.wrapper;
	}
	// save(blockContent) {
	// 	return {
	// 		url: blockContent.value,
	// 	};
	// }
	setFullImageSource(image) {
		const imageUrlWithToken = this.uploader.config.uploader.addTokenToURL(image) + '';
		//	this.nodes.secureIcon.style.background = `url('${imageUrlWithToken}') center center / cover no-repeat`;
		this.nodes.secureIcon.src = imageUrlWithToken;
	}

	showFullImage() {
		setTimeout(() => {
			this.nodes.secureIcon.classList.remove(this.CSS.loader);
			this.setFullImageSource(this.data.secureIcon);
		}, LOADER_DELAY);
	}

	save(toolsContent) {
		// params for response
		const check_row1_title = this.nodes.check_row1_title.textContent;
		const check_row1_text = this.nodes.check_row1_text.textContent;
		const check_row1_className = toolsContent.querySelector('[name=check_row1_className]').value;
		const check_row1_info = toolsContent.querySelector('[name=check_row1_info]').checked;
		const check_row1_iconClass = toolsContent.querySelector('[name=check_row1_iconClass]').value;
		const check_row1_checkboxClass = toolsContent.querySelector('[name=check_row1_checkboxClass]').value;

		const check_row2_iconClass = toolsContent.querySelector('[name=check_row2_iconClass]').value;
		const check_row2_checkboxClass = toolsContent.querySelector('[name=check_row2_checkboxClass]').value;

		const start_label = toolsContent
			.querySelectorAll('.cdx-moveDuration-wrapper-checkInput')[0]
			.querySelector('[contenteditable="true"]').textContent;
		const start_className = toolsContent.querySelector('[name=start_className]').value;
		const start_iconClass = toolsContent.querySelector('[name=start_iconClass]').value;
		const start_labelClass = toolsContent.querySelector('[name=start_labelClass]').value;
		const start_inputWrapperClass = toolsContent.querySelector('[name=start_inputWrapperClass]').value;
		const start_inputClass = toolsContent.querySelector('[name=start_inputClass]').value;

		const check_row2_title = this.nodes.check_row2_title.textContent;
		const check_row2_text = this.nodes.check_row2_text.textContent;
		const check_row2_className = toolsContent.querySelector('[name=check_row2_className]').value;
		const check_row2_info = toolsContent.querySelector('[name=check_row2_info]').checked;

		const start2_label = toolsContent
			.querySelectorAll('.cdx-moveDuration-wrapper-checkInput')[1]
			.querySelector('[contenteditable="true"]').textContent;
		const start2_className = toolsContent.querySelector('[name=start2_className]').value;
		const start2_iconClass = toolsContent.querySelector('[name=start2_iconClass]').value;
		const start2_labelClass = toolsContent.querySelector('[name=start2_labelClass]').value;
		const start2_inputWrapperClass = toolsContent.querySelector('[name=start2_inputWrapperClass]').value;
		const start2_inputClass = toolsContent.querySelector('[name=start2_inputClass]').value;

		const stop_label = toolsContent
			.querySelectorAll('.cdx-moveDuration-wrapper-checkInput')[2]
			.querySelector('[contenteditable="true"]').textContent;
		const stop_className = toolsContent.querySelector('[name=stop_className]').value;
		const stop_iconClass = toolsContent.querySelector('[name=stop_iconClass]').value;
		const stop_labelClass = toolsContent.querySelector('[name=stop_labelClass]').value;
		const stop_inputWrapperClass = toolsContent.querySelector('[name=stop_inputWrapperClass]').value;
		const stop_inputClass = toolsContent.querySelector('[name=stop_inputClass]').value;

		/**
		 * Fill missing fields with empty strings
		 */

		Object.assign(this.data, {
			check_row1_title: check_row1_title.trim() || '',
			check_row1_text: check_row1_text.trim() || '',

			check_row1_iconClass: check_row1_iconClass.trim() || '',
			check_row1_checkboxClass: check_row1_checkboxClass.trim() || '',
			check_row2_iconClass: check_row2_iconClass.trim() || '',
			check_row2_checkboxClass: check_row2_checkboxClass.trim() || '',

			check_row1_className: check_row1_className.trim() || '',
			check_row1_info: check_row1_info || true,
			start_label: start_label.trim() || '',
			start_className: start_className.trim() || '',
			start_iconClass: start_iconClass.trim() || '',
			start_labelClass: start_labelClass.trim() || '',
			start_inputWrapperClass: start_inputWrapperClass.trim() || '',
			check_row2_title: check_row2_title.trim() || '',
			check_row2_text: check_row2_text.trim() || '',
			check_row2_className: check_row2_className.trim() || '',
			check_row2_info: check_row2_info || true,
			start2_label: start2_label.trim() || '',
			start2_className: start2_className.trim() || '',
			start2_iconClass: start2_iconClass.trim() || '',
			start2_labelClass: start2_labelClass.trim() || '',
			start2_inputWrapperClass: start2_inputWrapperClass.trim() || '',
			stop_label: stop_label.trim() || '',
			stop_className: stop_className.trim() || '',
			stop_iconClass: stop_iconClass.trim() || '',
			stop_labelClass: stop_labelClass.trim() || '',
			stop_inputWrapperClass: stop_inputWrapperClass.trim() || '',
			start_inputClass: start_inputClass.trim() || '',
			start2_inputClass: start2_inputClass.trim() || '',
			stop_inputClass: stop_inputClass.trim() || '',
		});
		return this.data;
	}

	stopLoading() {
		setTimeout(() => {
			this.nodes.secureIcon.classList.remove(this.CSS.loader);
			this.nodes.secureIcon.removeAttribute('style');
		}, LOADER_DELAY);
	}

	/**
	 * Show loader when file upload started
	 */
	addLoader() {
		this.nodes.secureIcon.style.background = 'none';
		this.nodes.secureIcon.classList.add(this.CSS.loader);
	}

	/**
	 * If file uploading failed, remove loader and show notification
	 * @param {string} errorMessage -  error message
	 */
	uploadingFailed(errorMessage) {
		this.stopLoading();

		this.api.notifier.show({
			message: errorMessage,
			style: 'error',
		});
	}

	get CSS() {
		return {
			baseClass: this.api.styles.block,
			input: this.api.styles.input,
			loader: this.api.styles.loader,

			/**
			 * Tool's classes
			 */
			wrapper: 'cdx-moveDuration-wrapper',
			wrapper_check1: 'cdx-moveDuration-wrapper-check',
			wrapper_check2: 'cdx-moveDuration-wrapper-check',
			wrapper_input1: 'cdx-moveDuration-wrapper-checkInput',
			wrapper_input2: 'cdx-moveDuration-wrapper-checkInput',
			wrapper_input3: 'cdx-moveDuration-wrapper-checkInput',

			check_row1_title: 'cdx-moveDuration-wrapper-checkTitle',
			check_row2_title: 'cdx-moveDuration-wrapper-checkTitle',

			check_row1_text: 'cdx-moveDuration-wrapper-checkText',
			check_row2_text: 'cdx-moveDuration-wrapper-checkText',

			start_label: 'cdx-moveDuration-wrapper-Label',
			start2_label: 'cdx-moveDuration-wrapper-Label',
			stop_label: 'cdx-moveDuration-wrapper-Label',
		};
	}

	validate(savedData) {
		/**
		 * Return false if fields are empty
		 */
		return (
			savedData.check_row1_title ||
			savedData.check_row1_text ||
			savedData.check_row1_className ||
			savedData.check_row1_info ||
			savedData.start_label ||
			savedData.start_className ||
			savedData.start_iconClass ||
			savedData.start_labelClass ||
			savedData.start_inputWrapperClass ||
			savedData.check_row2_title ||
			savedData.check_row2_text ||
			savedData.check_row2_className ||
			savedData.check_row2_info ||
			savedData.start2_label ||
			savedData.start2_className ||
			savedData.start2_iconClass ||
			savedData.start2_labelClass ||
			savedData.start2_inputWrapperClass ||
			savedData.stop_label ||
			savedData.stop_className ||
			savedData.stop_iconClass ||
			savedData.stop_labelClass ||
			savedData.stop_inputWrapperClass ||
			savedData.start_inputClass ||
			savedData.start2_inputClass ||
			savedData.stop_inputClass
		);
	}

	make(tagName, classNames = null, attributes = {}, content = '') {
		const el = document.createElement(tagName);

		if (Array.isArray(classNames)) {
			el.classList.add(...classNames);
		} else if (classNames) {
			el.classList.add(classNames);
		}

		for (const attrName in attributes) {
			el[attrName] = attributes[attrName];
		}
		if (content !== '') {
			el.innerHTML = content;
		}

		return el;
	}

	_toggleTune(tune, type = '') {
		if (type == '') {
			for (var item of this.nodes.wrapper.querySelectorAll('.settingsWrapper')) {
				item.classList.remove('active');
			}
		}
		if (tune == 'check1') {
			this.nodes.wrapper
				.querySelectorAll('.cdx-moveDuration-wrapper-check')[0]
				.querySelector('.settingsWrapper')
				.classList.toggle('active');
		}
		if (tune == 'check2') {
			this.nodes.wrapper
				.querySelectorAll('.cdx-moveDuration-wrapper-check')[1]
				.querySelector('.settingsWrapper')
				.classList.toggle('active');
		}
		if (tune == 'input1') {
			this.nodes.wrapper
				.querySelectorAll('.cdx-moveDuration-wrapper-checkInput')[0]
				.querySelector('.settingsWrapper')
				.classList.toggle('active');
		}
		if (tune == 'input2') {
			this.nodes.wrapper
				.querySelectorAll('.cdx-moveDuration-wrapper-checkInput')[1]
				.querySelector('.settingsWrapper')
				.classList.toggle('active');
		}
		if (tune == 'input3') {
			this.nodes.wrapper
				.querySelectorAll('.cdx-moveDuration-wrapper-checkInput')[2]
				.querySelector('.settingsWrapper')
				.classList.toggle('active');
		}
		// }
	}
}
